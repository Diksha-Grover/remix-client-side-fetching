{
  "version": 3,
  "sources": ["../../../../../app/routes/__app/sales/invoices.tsx"],
  "sourcesContent": ["import { Outlet } from \"@remix-run/react\";\r\nimport { FilePlusIcon, LabelText } from \"~/components\";\r\n\r\nimport type { LoaderArgs } from \"@remix-run/node\";\r\nimport { json } from \"@remix-run/node\";\r\nimport { useLoaderData, NavLink } from \"@remix-run/react\";\r\nimport { getInvoiceListItems } from \"~/models/invoice.server\";\r\nimport { currencyFormatter } from \"~/utils\";\r\nimport { requireUser } from \"~/session.server\";\r\n\r\nexport async function loader({ request }: LoaderArgs) {\r\n  await requireUser(request);\r\n  const invoiceListItems = await getInvoiceListItems();\r\n  const dueSoonAmount = invoiceListItems.reduce((sum, li) => {\r\n    if (li.dueStatus !== \"due\") {\r\n      return sum;\r\n    }\r\n    const remainingBalance = li.totalAmount - li.totalDeposits;\r\n    return sum + remainingBalance;\r\n  }, 0);\r\n  const overdueAmount = invoiceListItems.reduce((sum, li) => {\r\n    if (li.dueStatus !== \"overdue\") {\r\n      return sum;\r\n    }\r\n    const remainingBalance = li.totalAmount - li.totalDeposits;\r\n    return sum + remainingBalance;\r\n  }, 0);\r\n  return json({\r\n    invoiceListItems,\r\n    overdueAmount,\r\n    dueSoonAmount,\r\n  });\r\n}\r\n\r\nexport default function InvoicesRoute() {\r\n  const data = useLoaderData<typeof loader>();\r\n  const hundo = data.dueSoonAmount + data.overdueAmount;\r\n  const dueSoonPercent = Math.floor((data.dueSoonAmount / hundo) * 100);\r\n  return (\r\n    <div className=\"relative\">\r\n      <div className=\"flex items-center justify-between gap-4\">\r\n        <InvoicesInfo label=\"Overdue\" amount={data.overdueAmount} />\r\n        <div className=\"flex h-4 flex-1 overflow-hidden rounded-full\">\r\n          <div className=\"bg-yellow-brand flex-1\" />\r\n          <div\r\n            className=\"bg-green-brand\"\r\n            style={{ width: `${dueSoonPercent}%` }}\r\n          />\r\n        </div>\r\n        <InvoicesInfo label=\"Due Soon\" amount={data.dueSoonAmount} right />\r\n      </div>\r\n      <div className=\"h-4\" />\r\n      <LabelText>Invoice List</LabelText>\r\n      <div className=\"h-2\" />\r\n      <InvoiceList>\r\n        <Outlet />\r\n      </InvoiceList>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction InvoicesInfo({\r\n  label,\r\n  amount,\r\n  right,\r\n}: {\r\n  label: string;\r\n  amount: number;\r\n  right?: boolean;\r\n}) {\r\n  return (\r\n    <div className={right ? \"text-right\" : \"\"}>\r\n      <LabelText>{label}</LabelText>\r\n      <div className=\"text-[length:18px] text-black\">\r\n        {currencyFormatter.format(amount)}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction InvoiceList({ children }: { children: React.ReactNode }) {\r\n  const { invoiceListItems } = useLoaderData<typeof loader>();\r\n  return (\r\n    <div className=\"flex overflow-hidden rounded-lg border border-gray-100\">\r\n      <div className=\"w-1/2 border-r border-gray-100\">\r\n        <NavLink\r\n          to=\"new\"\r\n          prefetch=\"intent\"\r\n          className={({ isActive }) =>\r\n            \"block border-b-4 border-gray-100 py-3 px-4 hover:bg-gray-50\" +\r\n            \" \" +\r\n            (isActive ? \"bg-gray-50\" : \"\")\r\n          }\r\n        >\r\n          <span className=\"flex gap-1\">\r\n            <FilePlusIcon /> <span>Create new invoice</span>\r\n          </span>\r\n        </NavLink>\r\n        <div className=\"max-h-96 overflow-y-scroll\">\r\n          {invoiceListItems.map((invoice) => (\r\n            <NavLink\r\n              key={invoice.id}\r\n              to={invoice.id}\r\n              prefetch=\"intent\"\r\n              className={({ isActive }) =>\r\n                \"block border-b border-gray-50 py-3 px-4 hover:bg-gray-50\" +\r\n                \" \" +\r\n                (isActive ? \"bg-gray-50\" : \"\")\r\n              }\r\n            >\r\n              <div className=\"flex justify-between text-[length:14px] font-bold leading-6\">\r\n                <div>{invoice.name}</div>\r\n                <div>{currencyFormatter.format(invoice.totalAmount)}</div>\r\n              </div>\r\n              <div className=\"flex justify-between text-[length:12px] font-medium leading-4 text-gray-400\">\r\n                <div>{invoice.number}</div>\r\n                <div\r\n                  className={\r\n                    \"uppercase\" +\r\n                    \" \" +\r\n                    (invoice.dueStatus === \"paid\"\r\n                      ? \"text-green-brand\"\r\n                      : invoice.dueStatus === \"overdue\"\r\n                      ? \"text-red-brand\"\r\n                      : \"\")\r\n                  }\r\n                >\r\n                  {invoice.dueStatusDisplay}\r\n                </div>\r\n              </div>\r\n            </NavLink>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <div className=\"w-1/2\">{children}</div>\r\n    </div>\r\n  );\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
